
<header class="row">
  <!-- Pridany styl pre skrytie textu na zaciatku -->
  <style>
    .header-text .string {
      visibility: hidden;
    }
  </style>

  <div class="col-lg-8 col-lg-offset-2" style="display:flex; align-items:flex-end; gap:20px;">
    <div class="header-text" style="flex:1;">
      <h1 class="">miroslav.gensor</h1>
      <p><span class="reserved">char</span> nick[<span class="number">6</span>] = <span class="string">"{{ site.nick }}"</span>;</p>
      <p><span class="reserved">char</span> fullname[<span class="number">15</span>] = <span class="string">"{{ site.fullname }}"</span>;</p>
      <p>printf(<a href="https://{{ site.hackthebox.server }}/profile/{{ site.hackthebox.profile }}" target="_blank"><span class="string"> "https://{{ site.hackthebox.server }}/<span class="reserved">%s\n</span>"</span></a> ,nick);</p>
      <p>printf(<a href="https://{{ site.linkedin.server }}/in/{{ site.linkedin.profile }}" target="_blank"><span class="string"> "https://{{ site.linkedin.server }}/in/<span class="reserved">%s\n</span>"</span></a> ,fullname);</p>
      <p>printf(<a href="https://{{ site.source_code.server }}/{{ site.source_code.nick }}" target="_blank"><span class="string"> "https://{{ site.source_code.server }}/<span class="reserved">%s\n</span>"</span></a> ,nick);</p>
      <!-- Added class="string" wrapper here for consistency -->
      <p>printf(<a href="https://www.chess.com/member/setuid_m" target="_blank"><span class="string"> "https://chess.com/%s\n"</span></a>, nick);</p>
      <p>printf(<a href="mailto:{{ site.fullname }}@{{ site.mail.domain }}.{{ site.mail.ext }}"><span class="string">"<span class="reserved"> %s\x40</span>{{ site.mail.domain }}<span class="reserved">\x2e</span>{{ site.mail.ext }}<span class="reserved">\n</span>"</span></a> ,fullname );</p>
      <p>puts(<a href="{{ site.baseurl }}misc/pubkey.gpg.txt" target="_blank"><span class="string">"5E12 9ABC C2A9 564B C048  2DF9 D327 0D10 BC71 CF75"</span></a>);</p>
    </div>

    <!-- Fotka napravo -->

    <div class="header-image profile-photo" style="transform: translateX(-30px)";>
      <img src="{{ site.baseurl }}/images/p4.jpg" alt="Miroslav Gensor" 
           style="width:120px; height:120px; object-fit:cover; border-radius:50%;
          box-shadow: 0 0 20px rgba(0,0,0,0.3)">
    </div>
  </div>
</header>



<script>
document.addEventListener("DOMContentLoaded", function() {
  // Nájde všetky elementy s triedou 'string' v hlavičke
  const strings = document.querySelectorAll('.header-text .string');
  const STORAGE_KEY = 'header_typewriter_played';
  
  // 1. KROK: Kontrola, či už animácia prebehla v tejto relácii
  if (sessionStorage.getItem(STORAGE_KEY)) {
    // Ak áno, okamžite zobrazíme text (prepíšeme visibility: hidden) a ukončíme skript
    strings.forEach(s => {
      s.style.visibility = 'visible';
    });
    return; // Ukončenie - animácia sa nespustí
  }
  
  // Ak nie, nastavíme príznak, že animácia sa práve spustí
  sessionStorage.setItem(STORAGE_KEY, 'true');
  
  // Rekurzívna funkcia na vypisovanie obsahu
  async function typeNode(sourceNode, targetNode) {
    const childNodes = Array.from(sourceNode.childNodes);
    
    for (const child of childNodes) {
      if (child.nodeType === Node.TEXT_NODE) {
        const text = child.textContent;
        // Vypisuje text znak po znaku
        for (let i = 0; i < text.length; i++) {
          targetNode.appendChild(document.createTextNode(text[i]));
          // Rýchlosť písania (ms) - náhodná odchýlka pre realistickejší efekt
          const delay = 30 + Math.random() * 30;
          await new Promise(r => setTimeout(r, delay));
        }
      } else if (child.nodeType === Node.ELEMENT_NODE) {
        // Ak je to element (napr. span class="reserved"), vytvoríme ho
        const newEl = document.createElement(child.tagName);
        
        // Skopírujeme všetky atribúty (class, style, atď.)
        Array.from(child.attributes).forEach(attr => {
          newEl.setAttribute(attr.name, attr.value);
        });
        
        targetNode.appendChild(newEl);
        
        // Rekurzívne vypisujeme do vnútra tohto elementu
        await typeNode(child, newEl);
      }
    }
  }
  
  async function startTyping() {
    // Prechádzame všetky stringy jeden po druhom
    for (const s of strings) {
        // Klonujeme pôvodný obsah, aby sme vedeli, čo máme vypísať
        const clone = s.cloneNode(true);
        
        // Vyčistíme aktuálny element
        s.innerHTML = '';
        
        // Zviditeľníme element práve teraz, keď doň ideme písať
        s.style.visibility = 'visible';
        
        // Spustíme písanie
        await typeNode(clone, s);
        
        // Voliteľné: pauza medzi riadkami
        await new Promise(r => setTimeout(r, 100)); 
    }
  }
  
  startTyping();
});
</script>



<!--
<header class="row">
  <div class="col-lg-8 col-lg-offset-2" style="display:flex; align-items:flex-end; gap:20px;">
    <div class="header-text" style="flex:1;">
      <h1 class="">miroslav.gensor</h1>
      <p><span class="reserved">char</span> nick[<span class="number">6</span>] = <span class="string">"{{ site.nick }}"</span>;</p>
      <p><span class="reserved">char</span> fullname[<span class="number">15</span>] = <span class="string">"{{ site.fullname }}"</span>;</p>
      <p>printf(<a href="https://{{ site.hackthebox.server }}/profile/{{ site.hackthebox.profile }}" target="_blank"><span class="string"> "https://{{ site.hackthebox.server }}/<span class="reserved">%s\n</span>"</span></a> ,nick);</p>
      <p>printf(<a href="https://{{ site.linkedin.server }}/in/{{ site.linkedin.profile }}" target="_blank"><span class="string"> "https://{{ site.linkedin.server }}/in/<span class="reserved">%s\n</span>"</span></a> ,fullname);</p>
      <p>printf(<a href="https://{{ site.source_code.server }}/{{ site.source_code.nick }}" target="_blank"><span class="string"> "https://{{ site.source_code.server }}/<span class="reserved">%s\n</span>"</span></a> ,nick);</p>
      <p>printf(<a href="https://www.chess.com/member/setuid_m" target="_blank"> "https://chess.com/%s\n"</a>, nick);</p>
      <p>printf(<a href="mailto:{{ site.fullname }}@{{ site.mail.domain }}.{{ site.mail.ext }}"><span class="string">"<span class="reserved"> %s\x40</span>{{ site.mail.domain }}<span class="reserved">\x2e</span>{{ site.mail.ext }}<span class="reserved">\n</span>"</span></a> ,fullname );</p>
      <p>puts(<a href="{{ site.baseurl }}misc/pubkey.gpg.txt" target="_blank"><span class="string">"5E12 9ABC C2A9 564B C048  2DF9 D327 0D10 BC71 CF75"</span></a>);</p>
    </div>

    <!-- Fotka napravo -->
<!--
    <div class="header-image profile-photo" style="transform: translateX(-30px)";>
      <img src="{{ site.baseurl }}/images/p4.jpg" alt="Miroslav Gensor" 
           style="width:120px; height:120px; object-fit:cover; border-radius:50%;
          box-shadow: 0 0 20px rgba(0,0,0,0.3)">
    </div>
  </div>
</header>
-->

{% include menu.html %}
