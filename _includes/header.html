
<header class="row">
  <!-- Zmena: display: none skryje text a NEREZERVUJE miesto (ziadna medzera) -->
  <style>
    .header-text .string {
      display: none;
    }
  </style>

  <div class="col-lg-8 col-lg-offset-2" style="display:flex; align-items:flex-end; gap:20px;">
    <div class="header-text" style="flex:1;">
      <h1 class="">miroslav.gensor</h1>
      <p><span class="reserved">char</span> nick[<span class="number">6</span>] = <span class="string">"{{ site.nick }}"</span>;</p>
      <p><span class="reserved">char</span> fullname[<span class="number">15</span>] = <span class="string">"{{ site.fullname }}"</span>;</p>
      <p>printf(<a href="https://{{ site.hackthebox.server }}/profile/{{ site.hackthebox.profile }}" target="_blank"><span class="string"> "https://{{ site.hackthebox.server }}/<span class="reserved">%s\n</span>"</span></a> ,nick);</p>
      <p>printf(<a href="https://{{ site.linkedin.server }}/in/{{ site.linkedin.profile }}" target="_blank"><span class="string"> "https://{{ site.linkedin.server }}/in/<span class="reserved">%s\n</span>"</span></a> ,fullname);</p>
      <p>printf(<a href="https://{{ site.source_code.server }}/{{ site.source_code.nick }}" target="_blank"><span class="string"> "https://{{ site.source_code.server }}/<span class="reserved">%s\n</span>"</span></a> ,nick);</p>
      <!-- Added class="string" wrapper here for consistency -->
      <p>printf(<a href="https://www.chess.com/member/setuid_m" target="_blank"><span class="string"> "https://chess.com/%s\n"</span></a>, nick);</p>
      <p>printf(<a href="mailto:{{ site.fullname }}@{{ site.mail.domain }}.{{ site.mail.ext }}"><span class="string">"<span class="reserved"> %s\x40</span>{{ site.mail.domain }}<span class="reserved">\x2e</span>{{ site.mail.ext }}<span class="reserved">\n</span>"</span></a> ,fullname );</p>
      <p>puts(<a href="{{ site.baseurl }}misc/pubkey.gpg.txt" target="_blank"><span class="string">"5E12 9ABC C2A9 564B C048  2DF9 D327 0D10 BC71 CF75"</span></a>);</p>
    </div>

    <!-- Fotka napravo -->

    <div class="header-image profile-photo" style="transform: translateX(-30px)";>
      <img src="{{ site.baseurl }}/images/p4.jpg" alt="Miroslav Gensor" 
           style="width:120px; height:120px; object-fit:cover; border-radius:50%;
          box-shadow: 0 0 20px rgba(0,0,0,0.3)">
    </div>
  </div>
</header>



<script>
document.addEventListener("DOMContentLoaded", function() {
  const strings = document.querySelectorAll('.header-text .string');
  const STORAGE_KEY = 'header_animation_played';
  const hasPlayed = sessionStorage.getItem(STORAGE_KEY);

  // 1. Ak uz animacia prebehla, len zobrazime text a koncime
  if (hasPlayed) {
    strings.forEach(s => {
      s.style.display = 'inline'; // Zobrazime okamzite
    });
    return;
  }

  // 2. Ak neprebehla, HNED si poznacime, ze bezi (aby sa pri prekliku nespustila znova)
  sessionStorage.setItem(STORAGE_KEY, 'true');

  // Funkcia na pisanie
  async function typeNode(sourceNode, targetNode) {
    const childNodes = Array.from(sourceNode.childNodes);
    for (const child of childNodes) {
      if (child.nodeType === Node.TEXT_NODE) {
        const text = child.textContent;
        for (let i = 0; i < text.length; i++) {
          targetNode.appendChild(document.createTextNode(text[i]));
          const delay = 30 + Math.random() * 30;
          await new Promise(r => setTimeout(r, delay));
        }
      } else if (child.nodeType === Node.ELEMENT_NODE) {
        const newEl = document.createElement(child.tagName);
        Array.from(child.attributes).forEach(attr => newEl.setAttribute(attr.name, attr.value));
        targetNode.appendChild(newEl);
        await typeNode(child, newEl);
      }
    }
  }
  
  async function startTyping() {
    for (const s of strings) {
        const clone = s.cloneNode(true);
        s.innerHTML = '';
        
        // Zmenime display z 'none' na 'inline', aby sa text mohol zacat objavovat
        s.style.display = 'inline';
        
        await typeNode(clone, s);
        await new Promise(r => setTimeout(r, 100)); 
    }
  }
  
  startTyping();
});
</script>




<!--
<header class="row">
  <div class="col-lg-8 col-lg-offset-2" style="display:flex; align-items:flex-end; gap:20px;">
    <div class="header-text" style="flex:1;">
      <h1 class="">miroslav.gensor</h1>
      <p><span class="reserved">char</span> nick[<span class="number">6</span>] = <span class="string">"{{ site.nick }}"</span>;</p>
      <p><span class="reserved">char</span> fullname[<span class="number">15</span>] = <span class="string">"{{ site.fullname }}"</span>;</p>
      <p>printf(<a href="https://{{ site.hackthebox.server }}/profile/{{ site.hackthebox.profile }}" target="_blank"><span class="string"> "https://{{ site.hackthebox.server }}/<span class="reserved">%s\n</span>"</span></a> ,nick);</p>
      <p>printf(<a href="https://{{ site.linkedin.server }}/in/{{ site.linkedin.profile }}" target="_blank"><span class="string"> "https://{{ site.linkedin.server }}/in/<span class="reserved">%s\n</span>"</span></a> ,fullname);</p>
      <p>printf(<a href="https://{{ site.source_code.server }}/{{ site.source_code.nick }}" target="_blank"><span class="string"> "https://{{ site.source_code.server }}/<span class="reserved">%s\n</span>"</span></a> ,nick);</p>
      <p>printf(<a href="https://www.chess.com/member/setuid_m" target="_blank"> "https://chess.com/%s\n"</a>, nick);</p>
      <p>printf(<a href="mailto:{{ site.fullname }}@{{ site.mail.domain }}.{{ site.mail.ext }}"><span class="string">"<span class="reserved"> %s\x40</span>{{ site.mail.domain }}<span class="reserved">\x2e</span>{{ site.mail.ext }}<span class="reserved">\n</span>"</span></a> ,fullname );</p>
      <p>puts(<a href="{{ site.baseurl }}misc/pubkey.gpg.txt" target="_blank"><span class="string">"5E12 9ABC C2A9 564B C048  2DF9 D327 0D10 BC71 CF75"</span></a>);</p>
    </div>

    <!-- Fotka napravo -->
<!--
    <div class="header-image profile-photo" style="transform: translateX(-30px)";>
      <img src="{{ site.baseurl }}/images/p4.jpg" alt="Miroslav Gensor" 
           style="width:120px; height:120px; object-fit:cover; border-radius:50%;
          box-shadow: 0 0 20px rgba(0,0,0,0.3)">
    </div>
  </div>
</header>
-->

{% include menu.html %}
